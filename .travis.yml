language: python
python:
    - "3.7"

services:
    - docker

before_script: 
    - pip install docker-compose
    - docker build --target production --tag todo-app:prod .
    - docker run -p 5000:5000 --env-file .env todo-app:prod
    - docker ps -a

script: 
    - poetry run pytest test
    